{
  "resource": {
    "aws_s3_bucket": {
      "test": {
        "bucket": "pretf-test-prod",
        "acl": "private",
        "server_side_encryption_configuration": {
          "rule": {
            "apply_server_side_encryption_by_default": {
              "sse_algorithm": "AES256"
            }
          }
        }
      }
    }
  },
  "data": {
    "aws_iam_policy_document": {
      "lambda": {
        "statement": {
          "effect": "Allow",
          "actions": [
            "s3:ListBucket",
            "s3:PutObject"
          ],
          "resources": [
            "${aws_s3_bucket.test.arn}",
            "${aws_s3_bucket.test.arn}/*"
          ]
        }
      }
    }
  },
  "module": {
    "lambda": {
      "source": "github.com/claranet/terraform-aws-lambda?ref=v0.12.0",
      "description": "Test",
      "function_name": "pretf-test-prod",
      "handler": "main.lambda_handler",
      "runtime": "python3.7",
      "source_path": "../src/lambda",
      "attach_policy": true,
      "policy": "${data.aws_iam_policy_document.lambda.json}",
      "environment": {
        "variables": {
          "BUCKET": "${aws_s3_bucket.test.id}",
          "DATA": "[4, 5, 6]"
        }
      }
    },
    "thing_0": {
      "source": "./modules/thing"
    },
    "thing_1": {
      "source": "./modules/thing"
    },
    "thing_2": {
      "source": "./modules/thing"
    },
    "thing_3": {
      "source": "./modules/thing"
    },
    "thing_4": {
      "source": "./modules/thing"
    }
  }
}